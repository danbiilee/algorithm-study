<html>
  <head>
    <meta charset="UTF-8" />
    <title>Ï∂úÎ†•Í≤∞Í≥º</title>
  </head>
  <body>
    <script>
      /*
        Q. Í≤ΩÎ°ú ÌÉêÏÉâ(DFS-Ïù∏Ï†ëÌñâÎ†¨: ÎÖ∏ÎìúÍ∞úÏàòÍ∞Ä Ï†ÅÏùÑ Îïå)
        Î∞©Ìñ•Í∑∏ÎûòÌîÑÍ∞Ä Ï£ºÏñ¥ÏßÄÎ©¥ 1Î≤à Ï†ïÏ†êÏóêÏÑú NÎ≤à Ï†ïÏ†êÏúºÎ°ú Í∞ÄÎäî Î™®Îì† Í≤ΩÎ°úÏùò Í∞ÄÏßÄ ÏàòÎ•º Ï∂úÎ†•
      */
      function mySolution(n, arr) {
        let answer = 0;
        let graph = Array.from({ length: n }, () => new Array(n).fill(0));

        for (let i = 0; i < arr.length; i++) {
          const [a, b] = arr[i];
          graph[a - 1][b - 1] = 1;
        }

        function G(V) {
          if (V === n) {
            answer++;
          } else {
            const a = V - 1;
            console.log("-------------", V);
            for (let i = 0; i < graph[a].length; i++) {
              if (graph[a][i] === 1) {
                console.log(i);
                // G(i + 1);
              }
            }
          }
        }

        G(1);
        return answer;
      }

      /* 
        üí• Ïù¥ÎØ∏ Î∞©Î¨∏Ìïú Ï†ïÏ†êÏùÄ Ï≤¥ÌÅ¨Î•º Ìï¥Ïïº Ìï®
        - D(1) - Ï†ïÏ†ê Í∞úÏàòÎßåÌÅº Í∞ÄÏßÄ ÏπòÎ©¥ÏÑú Ïù∏Ï†ëÌñâÎ†¨ ÌÉêÏÉâ
          - 1: ÏûêÍ∏∞ ÏûêÏã†(Ïù¥ÎØ∏ Ï≤¥ÌÅ¨)Ïù¥ÎØÄÎ°ú ÏïàÎê® 
          - 2: Ï≤¥ÌÅ¨ ÏïàÎêòÏñ¥ÏûàÏúºÎØÄÎ°ú 2Î≤àÏóê Ï≤¥ÌÅ¨ -> D(2) 
            - 1: Ï≤¥ÌÅ¨ÎêòÏñ¥ ÏûàÏñ¥ÏÑú ÏïàÎê®
            - 2: ÏûêÍ∏∞ ÏûêÏã†
            - 3: Ï≤¥ÌÅ¨ ÏïàÎêòÏñ¥ÏûàÏúºÎØÄÎ°ú 3Î≤àÏóê Ï≤¥ÌÅ¨ -> D(3)
              - 1: Ï≤¥ÌÅ¨ÎêòÏñ¥ ÏûàÏñ¥ÏÑú ÏïàÎê®
              - 2: Ï≤¥ÌÅ¨ÎêòÏñ¥ ÏûàÏñ¥ÏÑú ÏïàÎê®
              - 3: ÏûêÍ∏∞ ÏûêÏã†
              - 4: Ï≤¥ÌÅ¨ ÏïàÎêòÏñ¥ÏûàÏúºÎØÄÎ°ú 4Î≤àÏóê Ï≤¥ÌÅ¨ -> D(4)
                - 1: Ï≤¥ÌÅ¨ÎêòÏñ¥ ÏûàÏñ¥ÏÑú ÏïàÎê®
                - 2: Ï≤¥ÌÅ¨ÎêòÏñ¥ ÏûàÏñ¥ÏÑú ÏïàÎê®
                - 3: Ï≤¥ÌÅ¨ÎêòÏñ¥ ÏûàÏñ¥ÏÑú ÏïàÎê®
                - 4: Ï≤¥ÌÅ¨ÎêòÏñ¥ ÏûàÏñ¥ÏÑú ÏïàÎê®
                - 5: Ï≤¥ÌÅ¨ ÏïàÎêòÏñ¥ÏûàÏúºÎØÄÎ°ú 5Î≤àÏóê Ï≤¥ÌÅ¨ -> D(5) 
                  - V === n: answer++
                  - üí• Îí§Î°ú Î∞±Ìï† Îïå(Ïä§ÌÉùÏóêÏÑú D(5) pop) 5Î≤à Ï≤¥ÌÅ¨ Ìï¥Ï†úÌï¥Ï§òÏïº Ìï®
      */
      function solution(n, arr) {
        let answer = 0;
        // 1Î≤à Ïù∏Îç±Ïä§Î∂ÄÌÑ∞ ÏÇ¨Ïö©ÌïòÎØÄÎ°ú n + 1
        let graph = Array.from({ length: n + 1 }, () => Array(n + 1).fill(0));
        let ch = Array.from({ length: n + 1 }, () => 0);
        let path = []; // ÌôïÏù∏Ïö©

        for (let [a, b] of arr) {
          graph[a][b] = 1; // Îã®Î∞©Ìñ•
        }

        function DFS(v) {
          if (v === n) {
            answer++;
            console.log(path);
          } else {
            for (let i = 1; i <= n; i++) {
              if (graph[v][i] === 1 && ch[i] === 0) {
                ch[i] = 1; // Ï≤¥ÌÅ¨
                path.push(i);
                DFS(i);
                ch[i] = 0; // Ï≤¥ÌÅ¨ Ìï¥Ï†ú
                path.pop();
              }
            }
          }
        }

        ch[1] = 1; // üí• 1Î≤à ÎÖ∏ÎìúÎäî Î¨¥Ï°∞Í±¥ Ìè¨Ìï®
        path.push(1);
        DFS(1);

        return answer;
      }

      let arr = [
        [1, 2],
        [1, 3],
        [1, 4],
        [2, 1],
        [2, 3],
        [2, 5],
        [3, 4],
        [4, 2],
        [4, 5],
      ];
      console.log(solution(5, arr)); // 6
      /* 
        1 2 3 4 5
        1 2 5
        1 3 4 2 5
        1 3 4 5
        1 4 2 5
        1 4 5
      */
    </script>
  </body>
</html>
